/*
 * Formkit jQuery plugin
 * serialize/deserialize form
 *
 * @website https://github.com/tedliang/jquery-formkit/
 * @author: Ted Liang <tedliang[dot]email[at]gmail[dot]com>
 * @version 1.0
 *
 * Licensed under the MIT License
 */
(function(c){var d={format:"object",traditional:!1,extractForm:"extractForm",fillForm:"fillForm",copyForm:"copyForm",resetForm:"resetForm",extractField:"extractField",fillField:"fillField"},j=c("script").last().attr("data-formkit-config");j&&c.extend(d,eval("({"+j+"})"));c.fn[d.extractForm]=function(a){"string"==typeof a?a={format:a}:c.isFunction(a)&&(a="array"==d.format?{buildArray:a}:{buildObject:a});a=c.extend({},h,d,a||{});if("array"==a.format)return e.toArray(e.enabledElements(this),a.buildArray);
var b=e.toObject(e.enabledElements(this),a.buildObject);return"query"==a.format?c.param(b,a.traditional):b};c.fn[d.fillForm]=function(a){if("string"==typeof a)var b,a=l(c.map(a.split("&"),function(a){b=a.split("=");return{name:decodeURIComponent(b[0]),value:decodeURIComponent(b[1].replace(o,"%20"))}}));else c.isArray(a)&&(a=l(a));return e.fromObject(e.elements(this),a)};c.fn[d.copyForm]=function(a){return(!a||"string"==typeof a?c(a):a)[d.fillForm](this[d.extractForm]())};c.fn[d.resetForm]=function(){this.each(function(){this.reset()});
return this};c.fn[d.extractField]=function(a){if(a)return e.toObject(e.enabledElements(this,a),h.buildObject)[a];var a=this[d.extractForm](),b=0,c;for(k in a)a.hasOwnProperty(k)&&(c=k,b++);switch(b){case 0:break;case 1:return a[c];default:return a}};c.fn[d.fillField]=function(a,b){if(void 0==b){if(0==this.length)return c();b=a;a=this[0].name}var f={};f[a]=b;return e.fromObject(e.elements(this,a),f)};var h={buildObject:function(a,b){var f=this.name,g=b[f];"number"==typeof a&&(a=a.toString());"string"==
typeof g?b[f]=[g,a]:c.isArray(g)?g.push(a):b[f]=a},buildArray:function(a){return{name:this.name,value:a}}},l=function(a){var b={};c.each(a,function(){h.buildObject.call(this,this.value,b)});return b},m=/^(radio|checkbox)$/i,n=/\r?\n/g,o=/\+/g,e={toObject:function(a,b){var c={};a.each(function(){var a=i.toObject(this);null!==a&&b.call(this,a,c)});return c},fromObject:function(a,b){return a.filter(function(){return i.fromObject(this,b[this.name])})},toArray:function(a,b){return a.map(function(a,d){var e=
i.toObject(d);return null==e?null:c.isArray(e)?c.map(e,function(a){return b.call(d,a.replace(n,"\r\n"))}):b.call(d,e.replace(n,"\r\n"))}).get()},elements:function(a,b){if(0==a.length)return c();a=a[0].elements?c(a[0].elements).filter(":input"):a.map(function(){var a=c(this);return a.is(":input")?this:a.find(":input").get()});return a.filter(function(){if(!this.name||b&&this.name!=b)return!1;var a=(this.type||"").toLowerCase();return a&&0>"file|submit|image|reset|button".indexOf(a)})},enabledElements:function(a,
b){return e.elements(a,b).filter(function(){return!this.disabled})}},i={toObject:function(a){var b=null;m.test(a.type)?a.checked&&(b=a.value):b=c(a).val();return b},fromObject:function(a,b){if(!(void 0==b||null===b)){var d=c(a);if(m.test(a.type)){var e=a.value==b||c.isArray(b)&&(-1!=c.inArray(a.value,b)||-1!=c.inArray(parseFloat(a.value),b));if(d.prop("checked")!=e)return d.prop("checked",e),!0}else if(d.val()!=b)return d.val(b),!0}}}})(jQuery);